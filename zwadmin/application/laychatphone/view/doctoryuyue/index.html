<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>CustomerOrderFinished.html</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="CustomerCaseList" />
	<meta name="keywords" content="CustomerCaseList" />
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="__YUYUE__/css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="__YUYUE__/css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="__YUYUE__/css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="__YUYUE__/css/magnific-popup.css">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="__YUYUE__/css/flexslider.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="__YUYUE__/css/style.css">
	<link rel="stylesheet" href="__YUYUE__/css/new.css">

	<!-- Modernizr JS -->
	<script src="__YUYUE__/js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	</head>
	<body>
		
	<div class="fh5co-loader"></div>
	
	<div id="page">
	<nav class="fh5co-nav" role="navigation">
		<div class="container-wrap">
			<div class="top-menu">
				<div class="row">
					<div class="col-xs-2">
						<div style="display:none;" id="fh5co-logo">
							<a href="index.html" class="customerindex"><img src="__YUYUE__/./images/customer.png"></a>
							<a href="#" class="customername">CustomerName</a>
						</div>
					</div>
					<div class="col-xs-10 text-right menu-1">
						<ul>
							<li><a href="index.html">首页</a></li>
							<li><a href="customercenter.html">个人中心</a></li>
							<li class="has-dropdown">
								<a onclick="cases()">CASE列表</a>
								<ul class="dropdown">
									<li><a href="caselistfinished.html">已完成</a></li>
									<li><a href="caselistunfinished.html">未完成</a></li>
								</ul>
							</li>
							<li class="has-dropdown active">
								<a onclick="yuyuemanage()">预约管理</a>
								
							</li>
							<li><a href="#">预留</a></li>
							<li><a href="#">退出</a></li>
						</ul>
					</div>
				</div>
				
			</div>
		</div>
	</nav>
	<div class="container-wrap">
	<!-- 搜索框 -->
		<div class="caselist-search">
			<form style="display:none;" class="bs-example bs-example-form" role="form">
				<div class="row">
					<div class="col-md-12 col-sm-12 col-xs-12">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="输入Caseid或者关键词即可查询">
							<span class="input-group-btn">
								<button class="btn btn-default" type="button">
									Go!
								</button>
							</span>
						</div><!-- /input-group -->
					</div><!-- /.col-lg-6 -->
				</div><!-- /.row -->
			</form>
		</div>
	<div style="clear: both;"></div>
		<h3 class="caselist-finished">预约管理</h3>
		<div id="fh5co-blog" class="caselist-padding">
			<div class="row">
			{volist name="info" id="vo"}
				<div class="col-md-4">
					<div class="fh5co-blog animate-box">
						<div class="blog-text">
							<p><span class="orderlist-number">预约日期:</span>{$vo.submitdate}</p>
							<p><span class="orderlist-case">预约时间:</span>{$vo.time_quantum}</p>
						<p><span class="orderlist-case">关联Case:
							</span>
							{if condition="$vo.iscase eq 1"}关联
							{elseif condition="$vo.iscase eq 2"/}没关联
							{/if}
							</p>
							<p><span class="caselist-status">状态:</span>
							{if condition="$vo.appointment_state eq 1"} 委派中
							{elseif condition="$vo.appointment_state eq 2"/}预约成功
							{elseif condition="$vo.appointment_state eq 3"/}已完成
							{elseif condition="$vo.appointment_state eq 4"/}拒绝预约
							{/if}
							</p>
						    {if condition="$vo.appointment_state eq 1"} 
						    <button id="confirmyuyue{$vo.yuyueinfoid}{$vo.doctorid}" class="orderlist-cancel-button col-lg-12" type="button" onClick="confirmyuyue({$vo.yuyueinfoid},{$vo.doctorid});">确认</button>
							<button id="cancel{$vo.yuyueinfoid}" class="orderlist-cancel-button col-lg-12" type="button" onClick="ordercancel({$vo.yuyueinfoid});">拒绝</button>
							{elseif condition="$vo.appointment_state eq 2"/}<button id="cancel{$vo.yuyueinfoid}" class="orderlist-cancel-button col-lg-12" type="button" onClick="ordercancel({$vo.yuyueinfoid});">拒绝</button>
							{elseif condition="$vo.appointment_state eq 3"/}
							{elseif condition="$vo.appointment_state eq 4"/}
							{/if}

						</div> 
					</div>
				</div>
				{/volist}	
			</div>
		</div>
	</div><!-- END container-wrap -->

	<div class="container-wrap">
		<footer id="fh5co-footer" role="contentinfo">
			<div class="row copyright">
				<div class="col-md-12 text-center">
					<p>
						<small class="block">&copy; 2016 . All Rights Reserved <a href="#" target="_blank" title="Meetuuu">Meetuuu</a> - Collect from <a href="#" title="Meetuuu" target="_blank">Meetuuu</a></small>
					</p>
				</div>
			</div>
		</footer>
	</div><!-- END container-wrap -->
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up2"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="__YUYUE__/js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="__YUYUE__/js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="__YUYUE__/js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="__YUYUE__/js/jquery.waypoints.min.js"></script>
	<!-- Flexslider -->
	<script src="__YUYUE__/js/jquery.flexslider-min.js"></script>
	<!-- Magnific Popup -->
	<script src="__YUYUE__/js/jquery.magnific-popup.min.js"></script>
	<script src="__YUYUE__/js/magnific-popup-options.js"></script>
	<!-- Counters -->
	<script src="__YUYUE__/js/jquery.countTo.js"></script>
	<!-- Main -->
	<script src="__YUYUE__/js/main.js"></script>
	<!-- layer.js-->
	<script src="__YUYUE__/layer-v3.0.3/layer/mobile/layer.js" type="text/javascript"></script>

<script>
function cases(){
	 window.location.href="{:url('Phone/case_list')}";
}
function yuyuemanage(){
	
	 window.location.href="{:url('Yuyue/index')}";
	
}


function confirmyuyue(yuyueinfoid,doctorid){
	 $.ajax({
		 url:"{:url('Yuyue/addyuyue')}",
		   type:'post',
		   dataType:'json',
		   data:{"yuyueinfoid":yuyueinfoid,"doctorid":doctorid},
		   success:function(data){
		      if(data){
		    	
		      }

		   }
	 });
	
 var contentmain = "您确定同意此次预约吗?？"; 
		layer.open({
			content: contentmain
			,btn: ['确定', '不要']
			,yes: function(index){
				
				
				layer.close(index);	    				       
				       $("#confirmyuyue"+yuyueinfoid+doctorid).css("display","none");
				    }
		});	    
}
</script>
	<script>
	// 取消预约事件，此处确定方法暂时以刷新代替
	function ordercancel(id){
		
		$.ajax({
			 url:"{:url('Yuyue/cancel')}",
			   type:'post',
			   dataType:'json',
			   data:{"id":id},
			   success:function(data){
			      if(data){
			    	    var contentmain = "您确定要取消此次预约吗？"; 
						layer.open({
			    			content: contentmain
			    			,btn: ['确定', '不要']
			    			,yes: function(index){
			    				layer.close(index);
			    				       window.location.href="{:url('Yuyue/index')}";
			    				       $("#cancel"+id).css("display","none");
			    				       
			    				    }
			  			});	    
						
			      }

			   }
		 
		 
		 });
	
		
	}
	</script>

	</body>
</html>

